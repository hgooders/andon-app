<!DOCTYPE html>
<html>
<head>
  <title>OPR</title>
</head>
<body>
  <h1 style="text-align: center;">Operational Performance Report</h1>

  <h2>Most Common Reasons</h2>
  <ul>
    {% for reason, count in reasons.items() %}
      <li>{{ reason }}: {{ count }}</li>
    {% endfor %}
  </ul>

  <h2>All Andon Presses</h2>
  <table border="1" style="margin: auto;">
    <tr>
      <th>Reason</th>
      <th>Name</th>
      <th>Time Stopped (min)</th>
      <th>Timestamp</th>
    </tr>
    {% for entry in entries %}
    <tr>
      <td>{{ entry.reason }}</td>
      <td>{{ entry.name }}</td>
      <td>{{ entry.stopped_time }}</td>
      <td>{{ entry.timestamp }}</td>
    </tr>
    {% endfor %}
  </table>

  <br>

  <div style="text-align: center;">
    <form method="POST" action="/reset" style="display: inline-block; margin: 5px;">
      <button type="submit">Reset All Andons</button>
    </form>

    <form method="GET" action="/download" style="display: inline-block; margin: 5px;">
      <button type="submit">Download Data</button>
    </form>

    <a href="/" style="display: inline-block; margin: 5px;">
      <button type="button">Back</button>
    </a>
  </div>
</body>
</html>

